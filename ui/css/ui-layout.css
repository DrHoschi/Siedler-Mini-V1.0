/* ============================================================================
   Datei   : ui/css/ui-layout.css
   Projekt : Neue Siedler
   Version : v25.10.19-final2
   Zweck   : Spiel-Layout (HUD + quadratische Map + BuildDock) – NUR im Spiel aktiv
   Aktiv   : body.is-playing
   Hinweise:
   - Bis zum Spielstart bleibt der Start-Hintergrund aktiv (ui/ui-start.css).
   - Erst nach cb:game-start setzt ui-layout.js body.is-playing → Layout greift.
   - Safe-Areas (Notch/Gestenleisten) werden berücksichtigt.
   ============================================================================ */

:root{
  --hud-h: 56px;                 /* HUD-Höhe (Basis); kann per Media-Query skaliert werden */
  --dock-w: min(360px, 48vw);    /* BuildDock-Breite rechts */
  --gap: 8px;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
}

/* Basis: bis zum Spielstart greift HIER nichts */
body:not(.is-playing) #game-canvas,
body:not(.is-playing) #hud-root,
body:not(.is-playing) #build-dock { display: none !important; }

/* ===================== SPIEL-STATE ======================= */
body.is-playing {
  background: #0e1014; /* neutraler Game-Hintergrund */
  color: #eaeaea;
}

/* Canvas: quadratisch im verbleibenden Bereich links (HUD unten, Dock rechts) */
body.is-playing #game-canvas{
  position: fixed;
  left: calc(var(--safe-left) + var(--gap));
  top:  calc(var(--safe-top) + var(--gap));
  bottom: calc(var(--safe-bottom) + var(--hud-h) + var(--gap));
  right: calc(var(--safe-right) + var(--dock-w) + var(--gap));
  background: #1a1d22;
  display: block;
  /* Quadratischer Viewport: kürzere Kante bestimmt die Größe */
  /* Der eigentliche Square wird im JS über clientWidth/Height gemappt */
  border: 1px solid #0008;
  box-shadow: 0 6px 18px rgba(0,0,0,.45) inset;
}

/* HUD-Leiste unten, volle Breite (abzgl. Dock rechts) */
body.is-playing #hud-root{
  position: fixed;
  left:  calc(var(--safe-left) + var(--gap));
  right: calc(var(--safe-right) + var(--dock-w) + var(--gap));
  bottom: calc(var(--safe-bottom) + var(--gap));
  height: var(--hud-h);
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: rgba(16,18,22,.94);
  border: 1px solid #0008;
  border-radius: 10px;
  box-shadow: 0 10px 28px rgba(0,0,0,.35);
  overflow: hidden;
}

/* BuildDock rechts (Panel) */
body.is-playing #build-dock{
  position: fixed;
  top:    calc(var(--safe-top) + var(--gap));
  right:  calc(var(--safe-right) + var(--gap));
  bottom: calc(var(--safe-bottom) + var(--gap));
  width:  var(--dock-w);
  background: rgba(20,22,26,.94);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 10px;
  box-shadow: 0 10px 28px rgba(0,0,0,.35);
  color: #eaeaea;
  overflow: auto;
  display: none; /* per JS (ui-build.js) show/hide */
}
body.is-playing #build-dock[hidden] { display: none !important; }

/* Button, mit dem das Dock geöffnet wird (wird von ui-build.js sichtbar gemacht) */
#btn-build[hidden]{ display:none !important; }

/* Hilfsklasse für Module */
.hidden{ display: none !important; }

/* ----------------- Responsive Feinheiten ----------------- */
@media (min-width: 1200px){
  :root{ --hud-h: 64px; }
}
@media (max-width: 720px){
  :root{ --hud-h: 52px; --dock-w: min(320px, 52vw); }
}
