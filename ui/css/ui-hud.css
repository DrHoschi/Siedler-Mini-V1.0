/* =============================================================================
 * Datei   : ui/css/ui-hud.css
 * Projekt : Neue Siedler
 * Version : v1.8.1 (2025-10-14)
 * Zweck   : Ressourcen-HUD (oben links) – quadratische Zellen, Icons 100% mittig
 * Leitplanken:
 *   - Keine Subpixel-Drifts auf iOS/Safari
 *   - PNGs mit ungleichen Offsets trotzdem zentriert (object-fit + Grid-Center)
 *   - 9-Slice-Holzrahmen via border-image
 *   - Z-Index über Canvas, unter Inspector
 * Struktur:
 *   .hud             -> Container-Bar
 *   .hud__cell       -> eine Ressourcenzelle (Quadrat)
 *   .hud__title      -> Beschriftung (oben links)
 *   .hud__icon-wrap  -> Quadratischer Icon-Wrapper (zentriert)
 *   .hud__icon       -> <img> selbst (pixel-scharf)
 * ============================================================================= */

/* =========================
   [1] Variablen (einheitlich)
   ========================= */
:root{
  /* Rahmen (9-Slice) */
  --hud-frame-src: url("../../assets/ui/panel.svg");
  --hud-border-slice: 12;            /* abhängig von deiner panel.svg */

  /* Zellkante (Portrait/Landscape identisch) */
  --hud-cell-size: 88px;             /* ⇦ ein Wert für alles */
  --hud-gap: 8px;

  /* Icon-Größe als Anteil am Quadrat */
  --hud-icon-size: 64%;              /* 50–72% passen erfahrungsgemäß gut */

  /* Schrift */
  --hud-font: "Times New Roman", Georgia, serif;
  --hud-title-color: #5a3b24;
  --hud-title-shadow: 0 1px 0 rgba(255,255,255,.35);
}

/* =========================
   [2] Container-Bar
   ========================= */
.hud{
  position: fixed;
  top: 6px; left: 6px;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: var(--hud-cell-size);
  gap: var(--hud-gap);
  z-index: 50;                        /* Canvas < 40, Place-Overlay 40, HUD 50, Inspector > 60 */
  pointer-events: none;               /* HUD klickt nicht rein (nur Anzeige) */
}

/* Optional: in sehr schmalen Portrait-Views automatisch vertikal stapeln */
@media (max-width: 500px) and (orientation: portrait){
  .hud{
    grid-auto-flow: row;
    grid-auto-rows: var(--hud-cell-size);
  }
}

/* =========================
   [3] Zelle mit 9-Slice-Rahmen
   ========================= */
.hud__cell{
  width: var(--hud-cell-size);
  height: var(--hud-cell-size);
  box-sizing: border-box;
  border: 14px solid transparent;     /* muss >= slice sein */
  -webkit-border-image: var(--hud-frame-src) var(--hud-border-slice) fill stretch;
          border-image: var(--hud-frame-src) var(--hud-border-slice) fill stretch;

  background: #e9e0d3;                /* Pergament-Füllung (unter deinem SVG) */
  filter: saturate(0.95);
  position: relative;
  pointer-events: none;
  image-rendering: pixelated;
}

/* =========================
   [4] Titel (oben links)
   ========================= */
.hud__title{
  position: absolute;
  top: 6px; left: 8px;
  margin: 0;
  font: 700 18px/1 var(--hud-font);
  color: var(--hud-title-color);
  text-shadow: var(--hud-title-shadow);
  pointer-events: none;
  user-select: none;
}

/* =========================
   [5] Icon-Wrapper + Icon
   ========================= */
.hud__icon-wrap{
  /* Vollflächig über die Pergamentmitte, aber Abstand zum Rahmen */
  position: absolute;
  inset: 0;
  padding: 3px;                       /* Abstand vom Holzrahmen */
  display: grid;
  place-items: center;                 /* → EXAKT zentriert */
  pointer-events: none;
}

.hud__icon{
  width: var(--hud-icon-size);
  height: var(--hud-icon-size);
  display: block;                      /* baseline-Drift verhindern */
  object-fit: contain;                 /* PNG mit Rand bleibt mittig */
  image-rendering: pixelated;          /* Retro-schärfe */
  -webkit-user-drag: none;
  user-select: none;
}

/* =========================
   [6] Safe-Guard gegen Gerätezooms
   ========================= */
@supports (-webkit-touch-callout: none){
  .hud__icon{ image-rendering: -webkit-optimize-contrast; }
}
