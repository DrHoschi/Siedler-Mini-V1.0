<!doctype html>
<html lang="de">
<head>
  <!-- =========================================================
       META / BASIS
       ========================================================= -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <meta name="theme-color" content="#1f1f23">
  <title>Neue Siedler</title>

  <!-- =========================================================
       STYLES (Global → Start → Inspector)
       - ?v=… als einfaches Cache-Busting: Zahl erhöhen bei Updates
       ========================================================= -->
  <!-- <style>
  /* robust: unabhängig davon, wo die CSS-Datei liegt */
  :root { --start-bg: url('../../assets/ui/start-bg.jpg'); }
</style> -->
  <link rel="stylesheet" href="ui/css/ui.css?v=25.10.19">
  <link rel="stylesheet" href="ui/css/ui-start.css?v=25.10.19">
  <link rel="stylesheet" href="ui/css/ui-inspector.css?v=25.10.19"><!-- monolith -->
  <!-- Der kleine Layout-Glue (Platz für HUD + quadratische Map) -->
  <link  href="ui/css/ui-layout.css?v=25.10.19" rel="stylesheet">
</head>

<body>
  <!-- =========================================================
       WICHTIG: Diese Container erwartet dein Code
       ========================================================= -->
  <canvas id="game-canvas"></canvas>
  <div id="ui-root"></div>
<!-- HUD + BuildDock Platzhalter (werden von bestehenden UI-Modulen befüllt) -->
<div id="hud-root" aria-live="polite"></div>
<div id="build-dock" hidden></div>
<button id="btn-build" aria-label="Bau-Menü" hidden></button>
  <!-- =========================================================
       SCRIPTS – LADEREIHENFOLGE (kritisch!)
       ========================================================= -->

  <!-- 1) Logging/Polyfills (falls vorhanden) -->
  <script src="core/cblog.polyfill.js?v=25.10.19"></script>

  <!-- 2) Optionaler Mini-EventBus (falls vorhanden) -->
  <script src="core/eventbus.js?v=25.10.19"></script>

  <!-- 3) INSPECTOR MONOLITH – SEHR FRÜH laden!
         - Hookt Logs sofort (Early Hook + Buffer)
         - Overlay bleibt standardmäßig geschlossen
         - Overlay optional automatisch öffnen via:
           a) URL:  ?insp=open
           b) Code: <script>window.InspectorConfig={autoOpen:true}</script>
  -->

<!-- =========================================================================
     INSPECTOR-MODULE
     Pfad: ui/inspector/
     Lädt alle Funktionsblöcke des Inspector-Systems (Logs, Tests, Ressourcen, Pfade, Editor)
     ========================================================================= -->

<!-- Core & Grundlogik -->
<script src="ui/inspector/inspector.core.js"></script>
<!-- <script src="ui/inspector/inspector.hooks.js"></script> -->
  
<!-- APIs & Kompatibilität -->
<!-- <script src="ui/inspector/inspector.api-bridge.js"></script>
<script src="ui/inspector/inspector.api-compat.js"></script>
<script src="ui/inspector/inspector.compat.js"></script>
-->
<!-- UI-Bindings & Build -->
<!-- <script src="ui/inspector/inspector.build.js"></script>
<script src="ui/inspector/inspector.button-bind.js"></script>
<script src="ui/inspector/inspector.force-toggle.js"></script>
-->
<!-- Feature-Module -->
<!-- <script src="ui/inspector/inspector.logs.js"></script>

  

<script src="ui/inspector/inspector.paths.js"></script>
-->
<!-- Overlay / Layout-Hooks -->
<!-- <script src="ui/inspector/overlay.hooks.js"></script>
  -->
  <!-- Optional: Auto-Open global (entfernen, wenn nicht gewünscht) -->
  <!-- <script>window.InspectorConfig = { autoOpen:true };</script> -->
      
<!-- Inspector Core -->
<script defer src="ui/ui-inspector.js"></script>

  <!-- NEU: Core-Shim (stellt API/Bridge bereit, falls Inspector selbst nichts exportiert) -->
<script defer src="ui/inspector/inspector.api-core-shim.js"></script>
  
<!-- NEU: Event-Scan-Logik (ohne UI) -->
<script defer src="ui/inspector/events.scan.js"></script>

<!-- Tests-Tab (nutzt EventScan) -->
<script defer src="ui/inspector/inspector.tests.js"></script>

  <script src="ui/inspector/inspector.resources.js"></script>
  
<!-- (Optional) Events-Tab, falls du ihn zusätzlich behalten willst -->
<script defer src="ui/inspector/inspector.tab.events.js"></script>




  
  <!-- 4) Loader, die später READY-Events feuern (müssen dispatchen):
         window.dispatchEvent(new CustomEvent('cb:assets:ready'));
         window.dispatchEvent(new CustomEvent('cb:registry:ready')); -->
  <script src="core/asset.js?v=25.10.20"></script>
  <script src="core/registry.js?v=25.10.21"></script>

  <!-- 5) UI: Startscreen/Panel (erzeugt Startpanel + BG) -->
  <script src="ui/ui-start.js?v=25.10.19"></script>
<script src="ui/ui-hud.js?v=25.10.19"></script>
<!-- 7) Layout-Glue (winzige Helfer für Canvas-Größe & Event-Bridges) -->
<script src="ui/ui-layout.js?v=25.10.19"></script>
  <script src="ui/ui-build.js?v=25.10.19"></script>

<!-- 5) Debug Overlay für Pfade/Heatmap (vom Inspector gesteuert) -->
<script src="core/path-overlay.js?v=25.10.19"></script>

  
  <!-- 6) Boot + Spiel -->
  <script src="core/boot.js?v=25.10.19"></script>
  <script src="core/game.bootstrap.js?v=25.10.19"></script>
  <script src="core/game.js?v=25.10.19"></script>

  
  <!-- 7) Mini-Diagnose (öffnet NICHT den Inspector) -->
  <script>
    (window.CBLog?.info||console.info)('[index] geladen v25.10.19');
    // Harte Absicherung: niemals "offen" starten, selbst wenn eine Altlast die Klasse gesetzt hat.
    (function(){
      var host = document.getElementById('inspector-overlay');
      if (host) { host.classList.remove('open'); host.style.display='none'; }
    }());
  </script>
</body>
</html>
